provider: anthropic
model: claude-sonnet-4-6

model_params:
  temperature: 0.0
  max_tokens: 4096

prompts:
  system: prompts/system.j2
  user:   prompts/user.j2

io:
  input:  ../data/stage3_outputs/stage3_qwen72b.jsonl
  output: data/eval_output.jsonl
  id_field: id

concurrency: 4

retry:
  max_attempts: 4
  base_delay: 2.0
  max_delay: 60.0
  non_retryable_status: [400, 401, 403, 404]

validation:
  mode: json_schema
  schema:
    type: object
    required: [per_doc_notes, expected_response]
    properties:
      per_doc_notes:
        type: array
        items:
          type: object
          required: [doc_id, verdict]
          properties:
            doc_id: {type: string}
            verdict:
              type: string
              enum: [supports, partially supports, irrelevant]
      expected_response:
        type: object
        required: [answer, abstain]
        properties:
          answer: {type: string}
          abstain: {type: boolean}

output:
  include_raw_output: true
  include_parsed: true
  include_meta: true
